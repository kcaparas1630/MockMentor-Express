generator client {
    provider = "prisma-client-js"
    binaryTargets = ["native", "debian-openssl-3.0.x"]
}

datasource db {
    provider = "mongodb"
    url = env("DATABASE_URL")
}

// User
model User {
  id          String     @id @default(auto()) @map("_id") @db.ObjectId
  firebaseUid String     @unique
  profile     Profile
  interviews  Interview[]
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt
}

type Profile {
  name      String
  email     String
  jobRole   String
  lastLogin DateTime
}


model InterviewQuestion {
  id           String    @id @default(auto()) @map("_id") @db.ObjectId
  interview    Interview @relation(fields: [interviewId], references: [id])
  interviewId  String    @db.ObjectId
  questionId   String    @db.ObjectId
  questionText String
  answer       String
  score        Int?
  tips         String[]
  feedback     String?
  answeredAt   DateTime  @default(now())
}

model Interview {
  id            String              @id @default(auto()) @map("_id") @db.ObjectId     
  user          User                @relation(fields: [userId], references: [id])     
  userId        String              @db.ObjectId
  date          DateTime
  questions     InterviewQuestion[]
  duration      Int?
  interviewType String
  timestamp     DateTime            @default(now())
  updatedAt     DateTime?
  metadata      Json?
}

// Question
model Question {
  id            String   @id @default(auto()) @map("_id") @db.ObjectId
  question      String
  questionType  String
  jobRole       String
  jobLevel      String
}
